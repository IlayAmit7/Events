{"ast":null,"code":"import _asyncToGenerator from \"/Users/ilayamit/Desktop/Events-Test4 2/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/event.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction ListDataComponent_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const t_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", t_r2._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r2.eventTypeName);\n  }\n}\n\nfunction ListDataComponent_tr_22_td_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \"The event has already passed\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ListDataComponent_tr_22_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \"The event has not yet passed\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ListDataComponent_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function ListDataComponent_tr_22_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const e_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.deleteEvent(e_r3._id));\n    });\n    i0.ɵɵtext(12, \"\\u274C\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(13, ListDataComponent_tr_22_td_13_Template, 2, 0, \"td\", 6);\n    i0.ɵɵtemplate(14, ListDataComponent_tr_22_td_14_Template, 2, 0, \"td\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const e_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 6, e_r3.eventDateTime, \"d/M/Y HH:mm\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(e_r3.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(e_r3.address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(e_r3.participants);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isPassed(e_r3.eventDateTime));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.isPassed(e_r3.eventDateTime));\n  }\n}\n\nexport class ListDataComponent {\n  constructor(eventService) {\n    this.eventService = eventService;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this.eventsTypes = yield _this.eventService.getAllEventsTypes();\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n\n  getEvent(args) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const eventTypeId = args.target.value;\n        _this2.events = yield _this2.eventService.getAllEventsByType(eventTypeId);\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n\n  deleteEvent(_id) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const ok = window.confirm(\"Are you sure?\");\n        if (!ok) return;\n        yield _this3.eventService.deleteEvent(_id);\n        alert(\"The event has been deleted!\");\n\n        const index = _this3.events.findIndex(e => e._id === _id);\n\n        _this3.events.splice(index, 1);\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n\n  isPassed(date) {\n    const now = new Date().toISOString().slice(0, 10);\n    const dateEvent = new Date(date).toISOString().slice(0, 10);\n    return dateEvent <= now;\n  }\n\n}\n\nListDataComponent.ɵfac = function ListDataComponent_Factory(t) {\n  return new (t || ListDataComponent)(i0.ɵɵdirectiveInject(i1.EventService));\n};\n\nListDataComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListDataComponent,\n  selectors: [[\"app-list-data\"]],\n  decls: 23,\n  vars: 2,\n  consts: [[3, \"change\"], [\"value\", \"\", \"disabled\", \"\", \"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [3, \"click\"], [4, \"ngIf\"]],\n  template: function ListDataComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"div\")(2, \"select\", 0);\n      i0.ɵɵlistener(\"change\", function ListDataComponent_Template_select_change_2_listener($event) {\n        return ctx.getEvent($event);\n      });\n      i0.ɵɵelementStart(3, \"option\", 1);\n      i0.ɵɵtext(4, \"Select...\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, ListDataComponent_option_5_Template, 2, 2, \"option\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"table\")(7, \"thead\")(8, \"tr\")(9, \"th\");\n      i0.ɵɵtext(10, \"Date&Time\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"th\");\n      i0.ɵɵtext(12, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"th\");\n      i0.ɵɵtext(14, \"Address\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\");\n      i0.ɵɵtext(16, \"Participants\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"th\");\n      i0.ɵɵtext(18, \"Delete\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"th\");\n      i0.ɵɵtext(20, \"Is Passed\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(21, \"tbody\");\n      i0.ɵɵtemplate(22, ListDataComponent_tr_22_Template, 15, 9, \"tr\", 3);\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.eventsTypes);\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngForOf\", ctx.events);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i2.DatePipe],\n  styles: [\"table[_ngcontent-%COMP%] {\\n    margin: auto;\\n    margin-top: 20px;\\n}\\n\\ntable[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n    border: 1px solid;\\n    border-collapse: collapse;\\n    padding: 5px;\\n}\\n\\ntr[_ngcontent-%COMP%] {\\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\\n    color:black;\\n}\\n\\ntr[_ngcontent-%COMP%]:nth-child(even) {\\n    background-color: rgb(20, 151, 20);\\n    color:black;\\n}\\n\\ntr[_ngcontent-%COMP%]:nth-child(odd) {\\n    background-color: lightgreen;\\n    color:black;\\n}\\n\\nthead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child {\\n    background-color: rgb(229, 224, 224);\\n    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;\\n    color:black;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n    background: transparent;\\n    border: none;\\n    cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpc3QtZGF0YS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksWUFBWTtJQUNaLGdCQUFnQjtBQUNwQjs7QUFFQTs7O0lBR0ksaUJBQWlCO0lBQ2pCLHlCQUF5QjtJQUN6QixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksZ0RBQWdEO0lBQ2hELFdBQVc7QUFDZjs7QUFFQTtJQUNJLGtDQUFrQztJQUNsQyxXQUFXO0FBQ2Y7O0FBRUE7SUFDSSw0QkFBNEI7SUFDNUIsV0FBVztBQUNmOztBQUVBO0lBQ0ksb0NBQW9DO0lBQ3BDLHFHQUFxRztJQUNyRyxXQUFXO0FBQ2Y7O0FBRUE7SUFDSSx1QkFBdUI7SUFDdkIsWUFBWTtJQUNaLGVBQWU7QUFDbkIiLCJmaWxlIjoibGlzdC1kYXRhLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJ0YWJsZSB7XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIG1hcmdpbi10b3A6IDIwcHg7XG59XG5cbnRhYmxlLFxudGgsXG50ZCB7XG4gICAgYm9yZGVyOiAxcHggc29saWQ7XG4gICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICBwYWRkaW5nOiA1cHg7XG59XG5cbnRyIHtcbiAgICBmb250LWZhbWlseTogVmVyZGFuYSwgR2VuZXZhLCBUYWhvbWEsIHNhbnMtc2VyaWY7XG4gICAgY29sb3I6YmxhY2s7XG59XG5cbnRyOm50aC1jaGlsZChldmVuKSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIwLCAxNTEsIDIwKTtcbiAgICBjb2xvcjpibGFjaztcbn1cblxudHI6bnRoLWNoaWxkKG9kZCkge1xuICAgIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JlZW47XG4gICAgY29sb3I6YmxhY2s7XG59XG5cbnRoZWFkPnRyOmZpcnN0LWNoaWxkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjI5LCAyMjQsIDIyNCk7XG4gICAgZm9udC1mYW1pbHk6ICdUcmVidWNoZXQgTVMnLCAnTHVjaWRhIFNhbnMgVW5pY29kZScsICdMdWNpZGEgR3JhbmRlJywgJ0x1Y2lkYSBTYW5zJywgQXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgY29sb3I6YmxhY2s7XG59XG5cbmJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn0iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ListDataComponent","constructor","eventService","ngOnInit","eventsTypes","getAllEventsTypes","err","alert","message","getEvent","args","eventTypeId","target","value","events","getAllEventsByType","deleteEvent","_id","ok","window","confirm","index","findIndex","e","splice","isPassed","date","now","Date","toISOString","slice","dateEvent","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/ilayamit/Desktop/Events-Test4 2/Frontend/src/app/components/data-area/list-data/list-data.component.html","/Users/ilayamit/Desktop/Events-Test4 2/Frontend/src/app/components/data-area/list-data/list-data.component.ts"],"sourcesContent":["<div>\n\n    <div>\n        <select (change)=\"getEvent($event)\">\n            <option value=\"\" disabled selected>Select...</option>\n            <option *ngFor=\"let t of eventsTypes\" [value]=\"t._id\">{{t.eventTypeName}}</option>\n        </select>\n    </div>\n\n    <table>\n        <thead>\n            <tr>\n                <th>Date&Time</th>\n                <th>Description</th>\n                <th>Address</th>\n                <th>Participants</th>\n                <th>Delete</th>\n                <th>Is Passed</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr *ngFor=\"let e of events\">\n                <td>{{e.eventDateTime | date:\"d/M/Y HH:mm\"}}</td>\n                <td>{{e.description}}</td>\n                <td>{{e.address}}</td>\n                <td>{{e.participants}}</td>\n                <td><button (click)=\"deleteEvent(e._id)\">❌</button></td>\n                <td *ngIf=\"isPassed(e.eventDateTime)\">The event has already passed</td>\n                <td *ngIf=\"!isPassed(e.eventDateTime)\">The event has not yet passed</td>\n            </tr>\n        </tbody>\n    </table>\n\n</div>","import { Component, OnInit } from '@angular/core';\nimport { EventModel } from 'src/app/models/event-model.model';\nimport { EventTypeModel } from 'src/app/models/eventType-model.model';\nimport { EventService } from 'src/app/services/event.service';\n\n@Component({\n    selector: 'app-list-data',\n    templateUrl: './list-data.component.html',\n    styleUrls: ['./list-data.component.css']\n})\nexport class ListDataComponent implements OnInit {\n\n    public eventsTypes: EventTypeModel[];\n    public events: EventModel[];\n\n    constructor(private eventService: EventService) { }\n\n    async ngOnInit(): Promise<void> {\n        try {\n            this.eventsTypes = await this.eventService.getAllEventsTypes();\n        }\n        catch (err: any) {\n            alert(err.message);\n        }\n    }\n\n    public async getEvent(args: Event): Promise<void> {\n        try {\n            const eventTypeId = (args.target as HTMLSelectElement).value;\n            this.events = await this.eventService.getAllEventsByType(eventTypeId);\n        }\n        catch (err: any) {\n            alert(err.message);\n        }\n    }\n\n    public async deleteEvent(_id: string): Promise<void> {\n        try {\n            const ok = window.confirm(\"Are you sure?\");\n            if (!ok) return;\n\n            await this.eventService.deleteEvent(_id);\n\n            alert(\"The event has been deleted!\");\n\n            const index = this.events.findIndex(e => e._id === _id);\n            this.events.splice(index, 1);\n        }\n        catch (err: any) {\n            alert(err.message);\n        }\n    }\n\n    public isPassed(date: Date): boolean {\n        const now = new Date().toISOString().slice(0, 10);\n        const dateEvent = new Date(date).toISOString().slice(0, 10)\n        return dateEvent <= now;\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}